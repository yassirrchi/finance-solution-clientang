<div class="operation-section" >
    <form [formGroup]="operationForm" (ngSubmit)="onsubmit()">
    <div class="operation-tool-bar">
        <div class="input-container">
            <input type="text" placeholder="Search...">
            <button (click)="handleSearch()" type="button"><i class="bi bi-search"></i></button>
            <button   (click)="unlockForm()" [disabled]="!lockForm"><i class="bi bi-file-earmark-plus"></i></button>
            <i class="bi bi-lock"  *ngIf="lockForm" style="color: orange;"></i>
            <i class="bi bi-unlock" *ngIf="!lockForm" style="color: orange;"></i>
        </div>
        <div class="operation-control">
            
            <button type="submit" [disabled]="lockForm" [ngClass]="{'disabled-save-button':lockForm}"><i class="bi bi-file-earmark-check"></i></button>
            <select class="operation-status" formControlName="statut" [disabled]="lockForm" [ngClass]="{'disabled-save-button':lockForm}"  >
              
                <option class="draft">draft</option>
                <option>submit</option>
            </select>
            

        </div>
         
    </div>
     
    <div class="operation-options-nav">
        <div class="option-item" (click)="toggleForm()">
            Operation
        </div>
        <div class="option-item">
            Frais
        </div>
        <div class="option-item">
            Evenements
        </div>
        <div class="option-item">
            Complement d'operation
        </div>
         

         
    </div>









<!-- form below-->





<!-- pricipale option form-->


<div *ngIf="formVisibile &&pickedOperationId==0">

    <div class="operation-form">
        



        <div class="operation-form-section">

            <label for="type-operation">Type d'operation:</label>
           <select id="type-operation" name="type-operation" [disabled]="lockForm" formArrayName="typeop">
           <option value="0">Buy Equity Share</option>
           <option value="1">Sell Equity Share</option>
           </select><br><br>

           <label for="fond">Fond:</label>
           <select id="fond" name="fond" [disabled]="lockForm" formControlName="fundid">
           <option value="{{fund.id}}" *ngFor="let fund of funds">{{fund.code}} || {{fund.name}}</option>
            
           </select><br><br>

           <label for="compte-entite">Compte entite:</label>
           <select id="compte-entite" [disabled]="lockForm" name="compte-entite">
           <option value="compte1">Compte 1</option>
           <option value="compte2">Compte 2</option>
           </select><br><br>
 
  <label for="date-operation">Date d'operation:</label>
  <input type="date" id="date-operation" [disabled]="lockForm" name="date-operation"><br><br>

        </div>





        <div class="operation-form-section">






            <label for="type-operation">Portefeuille:</label>
            
  <select id="type-operation" name="type-operation" [disabled]="lockForm" formControlName="walletid">
     
     
    <option value="{{wallet.id}}" *ngFor="let wallet of wallets">{{wallet.code}} ☆  {{wallet.name}}</option>
  </select><br><br>

  <label for="fond">Depositaire:</label>
  <select id="fond" name="fond" [disabled]="lockForm">
    <option value=""></option>
     
    <option  value={{tiers.id}} *ngFor="let tier of depositaires">{{tier.code}} ☆  {{tier.name}}</option>
     
  </select><br><br>

  <label for="compte-entite">Compte Contrepartie:</label>
  <select id="compte-entite" name="compte-entite" [disabled]="lockForm">
    <option value="compte1">Compte 1</option>
    <option value="compte2">Compte 2</option>
  </select><br><br>

  <label for="date-operation">Date d'valeur:</label>
  <input type="date" id="date-operation" name="date-operation" [disabled]="lockForm"><br><br>



        </div>





        <div class="operation-form-section">




            <label for="type-operation">Contrepartie *</label>
  <select id="type-operation" name="type-operation" [disabled]="lockForm">
    <option value=""></option>
     
    <option  value={{tiers.id}} *ngFor="let tier of contreparties">{{tier.code}} ☆  {{tier.name}}</option>
  </select><br><br>

  <label for="fond">Intermediaire:</label>
  <select id="fond" name="fond" [disabled]="lockForm">
    <option value=""></option>
     
    <option  value={{tiers.id}} *ngFor="let tier of banks">{{tier.code}} ☆  {{tier.name}}</option>
    
  </select><br><br>

   



        </div>
    

    </div>






    


    <div class="operation-form">



        <div class="operation-form-section">

            <label for="type-operation">Quantite *</label>
           <input type="number"  [disabled]="lockForm" formControlName="quantite" (input)="typing()" >
           <br><br>

           <label for="fond">Position:</label>
           <input type="number" [disabled]="lockForm"><br><br>

            <br><br>
 
  

        </div>





        <div class="operation-form-section">






            <label for="type-operation">Prix *</label>
            <input type="number" [disabled]="lockForm" formControlName="price" (input)="typing()">
  <br><br>

  


        </div>





        <div class="operation-form-section">




            <label for="montant-brut">Montant Brut:</label>
            <input id="montant-brut" type="number" [disabled]="lockForm" readonly [value]="montant" ><br><br>

  <label for="fond">Devise:</label>
  <select id="fond" name="fond" [disabled]="lockForm">
    <option value="MAD">MAD</option>
    <option value="USD">USD</option>
  </select><br><br>

   



        </div>

    </div>
</div>
<!-- end pricipale option form-->

<!-- frais option form-->
<div *ngIf="pickedOperationId!=0">

    <div class="operation-form" >
        



        <div class="operation-form-section bg-2" >

            <label for="type-operation">Type d'operation {{showOperationDetails}}:</label>
           <select id="type-operation" name="type-operation" [disabled]="lockForm" formArrayName="typeop">
           <option value="0">Buy Equity Share</option>
            
           </select><br><br>

           <label for="fond">Fond:</label>
           <select id="fond" name="fond" [disabled]="true" formControlName="fundid"  >

           <option selected="selected" >{{detailedOperation.fund.code}} || {{detailedOperation.fund.name}}</option>
            
           </select><br><br>

           <label for="compte-entite">Compte entite:</label>
           <select id="compte-entite" [disabled]="lockForm" name="compte-entite">
           <option value="compte1">Compte 1</option>
           <option value="compte2">Compte 2</option>
           </select><br><br>
 
  <label for="date-operation">Date d'operation:</label>
  <input type="date" id="date-operation" [disabled]="lockForm" name="date-operation"><br><br>

        </div>





        <div class="operation-form-section bg-2">






            <label for="type-operation">Portefeuille:</label>
            
  <select id="type-operation" name="type-operation" [disabled]="lockForm" formControlName="walletid">
     
     
    <option value="{{wallet.id}}" *ngFor="let wallet of wallets">{{wallet.code}} ☆  {{wallet.name}}</option>
  </select><br><br>

  <label for="fond">Depositaire:</label>
  <select id="fond" name="fond" [disabled]="lockForm">
    <option value=""></option>
     
    <option  value={{tiers.id}} *ngFor="let tier of depositaires">{{tier.code}} ☆  {{tier.name}}</option>
     
  </select><br><br>

  <label for="compte-entite">Compte Contrepartie:</label>
  <select id="compte-entite" name="compte-entite" [disabled]="lockForm">
    <option value="compte1">Compte 1</option>
    <option value="compte2">Compte 2</option>
  </select><br><br>

  <label for="date-operation">Date d'valeur:</label>
  <input type="date" id="date-operation" name="date-operation" [disabled]="lockForm"><br><br>



        </div>





        <div class="operation-form-section bg-2">




            <label for="type-operation">Contrepartie *</label>
  <select id="type-operation" name="type-operation" [disabled]="lockForm">
    <option value=""></option>
     
    <option  value={{tiers.id}} *ngFor="let tier of contreparties">{{tier.code}} ☆  {{tier.name}}</option>
  </select><br><br>

  <label for="fond">Intermediaire:</label>
  <select id="fond" name="fond" [disabled]="lockForm">
    <option value=""></option>
     
    <option  value={{tiers.id}} *ngFor="let tier of banks">{{tier.code}} ☆  {{tier.name}}</option>
    
  </select><br><br>

   



        </div>
    

    </div>






    


    <div class="operation-form">



        <div class="operation-form-section">

            <label for="type-operation">Quantite *</label>
           <input type="number"  [disabled]="lockForm" formControlName="quantite" (input)="typing()" >
           <br><br>

           <label for="fond">Position:</label>
           <input type="number" [disabled]="lockForm"><br><br>

            <br><br>
 
  

        </div>





        <div class="operation-form-section">






            <label for="type-operation">Prix *</label>
            <input type="number" [disabled]="lockForm" formControlName="price" (input)="typing()">
  <br><br>

  


        </div>





        <div class="operation-form-section">




            <label for="montant-brut">Montant Brut:</label>
            <input id="montant-brut" type="number" [disabled]="lockForm" readonly [value]="montant" ><br><br>

  <label for="fond">Devise:</label>
  <select id="fond" name="fond" [disabled]="lockForm">
    <option value="MAD">MAD</option>
    <option value="USD">USD</option>
  </select><br><br>

   



        </div>

    </div>
</div>
</form>


<div class="operations-outter-container" *ngIf="showSearch">
    <div class="operations-inner-container">
     <app-table [operations]="operations" [ShowOerationDetail]="ShowOerationDetail" (operationPickedId)="setPickedOperationId($event)" ></app-table>
    </div>
</div>

</div>



